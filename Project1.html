<html>
	<head>
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="http://d3js.org/topojson.v1.min.js"></script>
		<title>What is the project called</title>
	</head>

	<body>
		<div id = "linePlot"></div>

		<script>
			//we did it
			function avg(l){
				var sum = 0;
				for(var i=0;i<l.length;i++){
					sum+=l[i];
				}
				return sum/l.length;
			}

			var height = 800;
			var width = 600;
			padding = 70;
			var svg = d3.select("#linePlot").append("svg").attr("width",width)
				.attr("height",height);
				
			//20px margin
			var g = svg.append("g");

			var xScale = d3.scale.linear().domain([1960,2014]).range([padding,width-padding]);
			var yScale = d3.scale.linear().domain([0,120000]).range([height-padding,padding]);

			var xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(10).tickFormat(d3.format('f%'));
			var yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(40);

			svg.append("g").attr("class", "axis")
				.attr("transform", "translate(0," + (height-padding) + ")").call(xAxis);

			svg.append("g").attr("class","axis")
				.attr("transform","translate(" + padding + ",0)").call(yAxis);

			var lineFunction = d3.svg.line().x(function(d){
				return xScale(d.x);
			})
			.y(function(d){
				return yScale(d.y);
			})
			.interpolate("linear");

			d3.json("cWars.json",function(error, json){
				civData = json;
				if(error){ console.log(error);}
				var prev = civData[0].COUNTRY;
				var cIntensities = [];
				var avgTemp = [];
				var repeats = [];
				civData.forEach(function(country){
					
					if((country.COUNTRY != prev)) {

						if( (country.COUNTRY in repeats && avg(avgTemp) > cIntensities[repeats.indexOf(country.COUNTRY)]["avg"]) ){
							cIntensities[country.COUNTRY] = avg(avgTemp);
							console.log("hello");
						}else{
							repeats.push(country.COUNTRY);
							var names = country.COUNTRY;
							cIntensities.push({name:names, avg:avg(avgTemp)});
							console.log(cIntensities[repeats.indexOf(country.COUNTRY)]["avg"]);
						}

						avgTemp = [];

					}
					avgTemp.push(country.CIVWAR);
					prev = country.COUNTRY;
				});
				console.log(cIntensities);
			});

			/*d3.json("gdp.json",function(error, json){
				gdpData = json;
				if(error){ console.log(error); }
				gdpData.forEach({

				}
			});*/

		</script>
	</body>
</html>